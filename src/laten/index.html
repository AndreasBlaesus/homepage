<!DOCTYPE html>
<html>
<head>
  <title>Welcome to Lat-En</title>
  <!--=include ../shared/partials/head.html -->
  <script src="https://unpkg.com/vue"></script>
</head>
<body>
  <div id="app">
    <input
      class="searchkey"
      v-model="searchkey"
      v-on:input="update"
      autofocus
    />
    <div>
      {{content}}
    </div>
  </div>

  <script>
    var app = new Vue({
      el: '#app',
      data() {
        return {
          searchkey: "",
          content: ""
        }
      },
      methods: {
        update: function() {
          var request = new XMLHttpRequest()
          request.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
              app.content = request.responseText
            }
          }
          var requestUrl =  location.origin + '/api/fetch/' + "https://en.wiktionary.org/w/index.php?rintable=yes&title=" + this.searchke
          request.open("GET", requestUrl)
          request.send()
        }
      }
    })
  </script>

  <style>
    body {
      font: 16px sans-serif;
    }
    .searchkey {
      display: block;
      max-width: 10em;
      font-size: 2em;
      background: #eee;
    }
  </style>

  <!--=include ../shared/partials/footer.html -->
  <!--=include ../shared/partials/ga.html -->
</body>
</html>
